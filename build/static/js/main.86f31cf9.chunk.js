(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{143:function(e,t,a){e.exports=a.p+"static/media/no-image.77f5794e.png"},169:function(e,t,a){e.exports=a(219)},196:function(e,t,a){},219:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),l=a.n(o),c=a(25),s=a(20),i=a(257),m=a(104),u=a.n(m)()({palette:{primary:{light:"#33c9dc",main:"#00bcd4",dark:"#008394",contrastText:"#fff"},secondary:{light:"#ec407a",main:"#e91e63",dark:"#d81b60",contrastText:"#fff"}},spreadThis:{logo:{maxWidth:75,maxHeight:75},typography:{useNextVariants:!0},form:{textAlign:"center"},image:{margin:"20px auto 20px auto"},pageTitle:{margin:"10px auto 10px auto"},textField:{margin:"10px auto 10px auto"},button:{marginTop:20,position:"relative"},customError:{color:"red",fontSize:"0.8rem",marginTop:10},progress:{position:"absolute"},invisibleSeparator:{border:"none",margin:4},visibleSeparator:{width:"100%",borderBottom:"1px solid rgba(0,0,0,0.1)",marginBottom:20},paper:{padding:20},profile:{"& .image-wrapper":{textAlign:"center",position:"relative","& button":{position:"absolute",top:"80%",left:"70%"}},"& .profile-image":{width:200,height:200,objectFit:"cover",maxWidth:"100%",borderRadius:"50%",margin:"auto"},"& .profile-details":{textAlign:"center","& span, svg":{verticalAlign:"middle"},"& a":{color:"#00bcd4"}},"& hr":{border:"none",margin:"0 0 10px 0"},"& svg.button":{"&:hover":{cursor:"pointer"}}},buttons:{textAlign:"center","& a":{margin:"20px 10px"}}}}),p=(a(196),a(11)),d=a(27),h=a.n(d),E=function(){return function(e){e({type:"LOADING_USER"}),h.a.get("/user").then((function(t){e({type:"SET_USER",payload:t.data})})).catch((function(e){return console.log(e)}))}},b=function(){return function(e){localStorage.removeItem("IdToken"),delete h.a.defaults.headers.common.Authorization,e({type:"SET_UNAUTHENTICATED"})}},f=function(e){var t="Bearer ".concat(e);localStorage.setItem("IdToken",t),h.a.defaults.headers.common.Authorization=t},g=a(54),y=a(140),O=a(69),v=a(7),j={authenticated:!1,credentials:{},likes:[],notifications:[],loading:!1},S={posts:[],post:{},loading:!1},C={loading:!1,errors:null},N=[y.a],I=Object(g.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUTHENTICATED":return Object(v.a)(Object(v.a)({},e),{},{authenticated:!0});case"SET_UNAUTHENTICATED":return j;case"SET_USER":return Object(v.a)({authenticated:!0,loading:!1},t.payload);case"LOADING_USER":return Object(v.a)(Object(v.a)({},e),{},{loading:!0});case"LIKE_POST":return Object(v.a)(Object(v.a)({},e),{},{likes:[].concat(Object(O.a)(e.likes),[{userHandle:e.credentials.userHandle,postId:t.payload._id}])});case"UNLIKE_POST":return Object(v.a)(Object(v.a)({},e),{},{likes:e.likes.filter((function(e){return e.postId!==t.payload._id}))});default:return e}},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_DATA":return Object(v.a)(Object(v.a)({},e),{},{loading:!0});case"SET_POSTS":return Object(v.a)(Object(v.a)({},e),{},{posts:t.payload,loading:!1});case"LIKE_POST":case"UNLIKE_POST":var a=e.posts.findIndex((function(e){return e._id===t.payload._id}));return e.posts[a]=t.payload,e.post._id===t.payload._id&&(e.post=t.payload),Object(v.a)({},e);case"DELETE_POST":var n=e.posts.findIndex((function(e){return e._id===t.payload}));return e.posts.splice(n,1),Object(v.a)({},e);case"ADD_POST":return Object(v.a)(Object(v.a)({},e),{},{posts:[t.payload].concat(Object(O.a)(e.posts))});case"SET_POST":return Object(v.a)(Object(v.a)({},e),{},{post:t.payload});case"SUBMIT_COMMENT":return Object(v.a)(Object(v.a)({},e),{},{post:Object(v.a)(Object(v.a)({},e.post),{},{comments:[t.payload].concat(Object(O.a)(e.post.comments))})});default:return Object(v.a)({},e)}},UI:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ERRORS":return Object(v.a)(Object(v.a)({},e),{},{loading:!1,errors:t.payload});case"CLEAR_ERRORS":return Object(v.a)(Object(v.a)({},e),{},{loading:!1,errors:null});case"LOADING_UI":return Object(v.a)(Object(v.a)({},e),{},{loading:!0});case"STOP_LOADING_UI":return Object(v.a)(Object(v.a)({},e),{},{loading:!1});default:return e}}}),T=Object(g.e)(I,{},Object(g.d)(g.a.apply(void 0,N),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),x=a(14),k=a(15),w=a(17),_=a(16),U=function(){return function(e){e({type:"CLEAR_ERRORS"})}},D=a(258),P=a(21),A=a.n(P),R=a(255),L=a(273),W=a(254),H=a(253),F=a(272),B=a(252),M=a(142),G=a.n(M),Y=function(e){Object(w.a)(a,e);var t=Object(_.a)(a);function a(){var e;Object(x.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={open:!1},e.handleOpen=function(){e.setState({open:!0})},e.handleClose=function(){e.setState({open:!1})},e.deletePost=function(){e.props.deletePost(e.props.postId),e.setState({open:!1})},e}return Object(k.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(n.Fragment,null,r.a.createElement(F.a,{title:"Delete Post",placement:"top"},r.a.createElement(B.a,{onClick:this.handleOpen,className:e.button},r.a.createElement(G.a,{color:"secondary"}))),r.a.createElement(L.a,{open:this.state.open,onClose:this.state.handleClose,fullWidth:!0,maxWidth:"sm"},r.a.createElement(H.a,null,"Are you sure you want to delete this?"),r.a.createElement(W.a,null,r.a.createElement(R.a,{onClick:this.handleClose,color:"primary"},"Cancle"),r.a.createElement(R.a,{onClick:this.deletePost,color:"secondary"},"Delete"))))}}]),a}(n.Component),z=Object(p.b)(null,{deletePost:function(e){return function(t){h.a.delete("/post/".concat(e)).then((function(){t({type:"DELETE_POST",payload:e})})).catch((function(e){return console.log(e)}))}}})(A()((function(e){return Object(v.a)(Object(v.a)({},e.spreadThis),{},{button:{position:"absolute",left:"90%",top:"10%"}})}))(Y)),K=a(46),V=a.n(K),X=a(143),J=a.n(X),$=a(144),q=a.n($),Q=a(145),Z=a.n(Q),ee=a(220),te=function(e){Object(w.a)(a,e);var t=Object(_.a)(a);function a(){var e;Object(x.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).likedPost=function(){return!(!e.props.user.likes||!e.props.user.likes.find((function(t){return t.postId===e.props.postId})))},e.likePost=function(){e.props.likePost(e.props.postId)},e.unlikePost=function(){e.props.unlikePost(e.props.postId)},e}return Object(k.a)(a,[{key:"render",value:function(){return this.likedPost()?r.a.createElement(F.a,{title:"Undo Like",placement:"top"},r.a.createElement(B.a,{onClick:this.unlikePost},r.a.createElement(q.a,{color:"primary"}))):r.a.createElement(F.a,{title:"Like",placement:"top"},r.a.createElement(B.a,{onClick:this.likePost},r.a.createElement(Z.a,{color:"primary"})))}}]),a}(n.Component),ae={likePost:function(e){return function(t){h.a.get("/post/".concat(e,"/like")).then((function(e){t({type:"LIKE_POST",payload:e.data})})).catch((function(e){return console.log(e)}))}},unlikePost:function(e){return function(t){h.a.get("/post/".concat(e,"/unlike")).then((function(e){t({type:"UNLIKE_POST",payload:e.data})})).catch((function(e){return console.log(e)}))}}},ne=Object(p.b)((function(e){return{user:e.user}}),ae)(Object(ee.a)((function(e){return Object(v.a)({},e.spredThis)}))(te)),re=a(110),oe=function(e){Object(w.a)(a,e);var t=Object(_.a)(a);function a(){return Object(x.a)(this,a),t.apply(this,arguments)}return Object(k.a)(a,[{key:"render",value:function(){console.log(this.props);var e=this.props,t=e.comments,a=e.classes;return r.a.createElement(D.a,{container:!0},t.map((function(e,o){var l=e.body,s=e.createdAt,i=e.userImage,m=e.userHandle;return r.a.createElement(n.Fragment,{key:s},r.a.createElement(D.a,{item:!0,sm:12},r.a.createElement(D.a,{container:!0},r.a.createElement(D.a,{item:!0,sm:2},r.a.createElement("img",{src:i,alt:"Image",className:a.commentImage})),r.a.createElement(D.a,{item:!0,sm:9},r.a.createElement("div",{className:a.commentData},r.a.createElement(re.a,{variant:"h6",component:c.b,to:"user/".concat(m),color:"primary"},m),r.a.createElement(re.a,{variant:"body2",color:"textSecondary"},V()(s).fromNow()),r.a.createElement("hr",{className:a.invisibleSeparator}),r.a.createElement(re.a,{variant:"body1"},l))))),o!==t.length-1&&r.a.createElement("hr",{className:a.visibleSeparator}))})))}}]),a}(n.Component),le=A()((function(e){return Object(v.a)(Object(v.a)({},e.spreadThis),{},{commentImage:{width:75,height:75,objectFit:"cover",borderRadius:"50%"},commentData:{marginLeft:20}})}))(oe),ce=a(32),se=a(270),ie=a(259),me=a(146),ue=a.n(me),pe=function(e){Object(w.a)(a,e);var t=Object(_.a)(a);function a(){var e;Object(x.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={body:"",errors:{}},e.handleChange=function(t){console.log(t.target.value),e.setState(Object(ce.a)({},t.target.name,t.target.value))},e.handleSend=function(t){t.preventDefault(),e.props.addComment(e.props.postId,{body:e.state.body})},e}return Object(k.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors}),e.UI.errors||e.UI.loading||this.setState({body:"",errors:{}})}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.errors,o=t.body;return console.log(a),r.a.createElement(n.Fragment,null,r.a.createElement("hr",{className:e.myvisibleSeparator}),r.a.createElement("form",{onSubmit:this.handleSend},r.a.createElement(se.a,{variant:"outlined",name:"body",fullWidth:!0,className:e.body,onChange:this.handleChange,placeholder:"Write a comment",value:o,error:!!a.comment,helperText:a.comment,InputProps:{endAdornment:r.a.createElement(ie.a,{position:"end"},r.a.createElement(F.a,{title:"Send"},r.a.createElement(B.a,{type:"submit",onClick:this.handleSend},r.a.createElement(ue.a,{color:"primary",className:e.sendIcon}))))}})),r.a.createElement("hr",{className:e.visibleSeparator}))}}]),a}(n.Component),de=Object(p.b)((function(e){return{UI:e.UI}}),{addComment:function(e,t){return function(a){h.a.post("/post/".concat(e,"/comment"),t).then((function(e){a({type:"SUBMIT_COMMENT",payload:e.data}),a(U())})).catch((function(e){console.log(e.response),a({type:"SET_ERRORS",payload:e.response.data})}))}}})(A()((function(e){return Object(v.a)(Object(v.a)({},e.spreadThis),{},{paper:{width:500,padding:"1px 0px 1px 5px"},body:{width:388},myvisibleSeparator:{width:"100%",borderBottom:"1px solid rgba(0,0,0,0.1)",marginBottom:10}})}))(pe)),he=a(261),Ee=a(260),be=a(94),fe=a.n(be),ge=a(147),ye=a.n(ge),Oe=a(93),ve=a.n(Oe),je=function(e){Object(w.a)(a,e);var t=Object(_.a)(a);function a(){var e;Object(x.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={open:!1},e.handleOpen=function(){e.setState({open:!0}),e.props.getPost(e.props.postId)},e.handleClose=function(){e.setState({open:!1}),e.props.clearErrors()},e}return Object(k.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.post,o=e.UI.loading;console.log(a.postData);var l=o?r.a.createElement("div",{className:t.spinnerDiv},r.a.createElement(Ee.a,{size:100,thickness:2})):a.postData&&r.a.createElement(D.a,{container:!0,spacing:12},r.a.createElement(D.a,{item:!0,xs:4},r.a.createElement("img",{src:a.postData.userImage,alt:J.a,className:t.profileImage})),r.a.createElement(D.a,{item:!0,xs:8},r.a.createElement(re.a,{component:c.b,color:"primary",variant:"h5",to:"/users/".concat(this.props.userHandle)},"@",this.props.userHandle),r.a.createElement("hr",{className:t.invisibleSeparator}),r.a.createElement(re.a,{variant:"body2",color:"textSecondary"},V()(a.postData.createdAt).format("h:mm a, MMMM DD YYYY")),r.a.createElement("hr",{className:t.invisibleSeparator}),r.a.createElement(re.a,{variant:"body1"},a.postData.content),r.a.createElement(ne,{postId:a.postData._id}),r.a.createElement("span",null,a.postData.likeCount," Likes"),r.a.createElement(F.a,{title:"Comments",placement:"top"},r.a.createElement(B.a,null,r.a.createElement(ve.a,{color:"primary"}))),r.a.createElement("span",null,a.postData.commentCount," Comments")),r.a.createElement("hr",{className:t.visibleSeperator}),r.a.createElement(de,{postId:a.postData._id}),r.a.createElement(le,{comments:a.comments}));return r.a.createElement(n.Fragment,null,r.a.createElement(F.a,{title:"Expand Post",className:t.expandButton},r.a.createElement(B.a,{onClick:this.handleOpen},r.a.createElement(ye.a,{color:"primary"}))),r.a.createElement(L.a,{open:this.state.open,onClose:this.handleClose,fullWidth:!0,maxWidth:"xs"},r.a.createElement(F.a,{title:"Close",onClick:this.handleClose,className:t.closeButton},r.a.createElement(fe.a,null)),r.a.createElement(he.a,{className:t.dialogContent},l)))}}]),a}(n.Component),Se=Object(p.b)((function(e){return{post:e.data.post,UI:e.UI}}),{getPost:function(e){return function(t){t({type:"LOADING_UI"}),console.log(e),h.a.get("/post/".concat(e)).then((function(e){console.log(e.data.comments),t({type:"SET_POST",payload:e.data}),t({type:"STOP_LOADING_UI"})})).catch((function(e){return console.log(e)}))}},clearErrors:U})(A()((function(e){return Object(v.a)(Object(v.a)({},e.spreadThis),{},{closeButton:{position:"absolute",left:"90%",top:"3.5%"},profileImage:{maxWidth:120,height:120,borderRadius:"50%",objectFit:"cover"},dialogContent:{padding:20},expandButton:{position:"absolute",left:"90%"},spinnerDiv:{textAlign:"center",marginTop:50,marginBottom:50}})}))(je)),Ce=a(262),Ne=a(264),Ie=a(263),Te=a(148),xe=a.n(Te),ke=function(e){Object(w.a)(a,e);var t=Object(_.a)(a);function a(){return Object(x.a)(this,a),t.apply(this,arguments)}return Object(k.a)(a,[{key:"render",value:function(){V.a.extend(xe.a);var e=this.props,t=e.classes,a=e.post,n=e.user.credentials.userHandle===a.userHandle?r.a.createElement(z,{postId:a._id}):null;return r.a.createElement("div",null,r.a.createElement(Ce.a,{className:t.card},r.a.createElement(Ie.a,{className:t.image,image:a.userImage,title:"Profile Image"}),r.a.createElement(Ne.a,{className:t.content},r.a.createElement(re.a,{variant:"h6",component:c.b,to:"/user/".concat(a.userHandle),color:"primary"},a.userHandle),n,r.a.createElement(re.a,{variant:"body1"}," ",a.content," "),r.a.createElement(re.a,{variant:"caption",color:"textSecondary"},V()(a.createdAt).fromNow()),r.a.createElement(ne,{postId:a._id}),r.a.createElement("span",null,a.likeCount," Likes"),r.a.createElement(F.a,{title:"Comments",placement:"top"},r.a.createElement(B.a,null,r.a.createElement(ve.a,{color:"primary"}))),r.a.createElement("span",null,a.commentCount," Comments"),r.a.createElement(Se,{postId:a._id,userHandle:a.userHandle}))))}}]),a}(n.Component),we=Object(p.b)((function(e){return{user:e.user}}),null)(A()({card:{display:"flex",marginBottom:20,position:"relative"},image:{minWidth:200,objectFit:"cover"},content:{padding:20}})(ke)),_e=a(95),Ue=a.n(_e),De=function(e){Object(w.a)(a,e);var t=Object(_.a)(a);function a(){var e;Object(x.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={bio:"",website:"",location:"",open:!1},e.handleOpen=function(){e.setState({open:!0}),e.mapUserDetailsToState(e.props.credentials)},e.handleClose=function(){e.setState({open:!1})},e.mapUserDetailsToState=function(t){e.setState({bio:t.bio?t.bio:"",website:t.website?t.website:"",location:t.location?t.location:""})},e.handleChange=function(t){e.setState(Object(ce.a)({},t.target.name,t.target.value))},e.handleSubmit=function(){var t={bio:e.state.bio,website:e.state.website,location:e.state.location};e.props.editUserDetails(t),e.handleClose()},e}return Object(k.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.credentials;this.mapUserDetailsToState(e)}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(n.Fragment,null,r.a.createElement(F.a,{title:"Edit Details",placement:"top"},r.a.createElement(B.a,{onClick:this.handleOpen,className:e.button},r.a.createElement(Ue.a,{color:"primary"}))),r.a.createElement(L.a,{open:this.state.open,onClose:this.handleClose,fullWidth:!0,maxWidth:"sm"},r.a.createElement(H.a,null,"Edit your Details"),r.a.createElement(he.a,null,r.a.createElement("form",null,r.a.createElement(se.a,{name:"bio",type:"text",label:"Bio",fullWidth:!0,placeholder:"A short bio about yourself",className:e.textField,value:this.state.bio,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement(se.a,{name:"website",type:"text",label:"Website",rows:"3",placeholder:"Your personal/professional website",className:e.textField,value:this.state.website,onChange:this.handleChange,style:{marginRight:"20px"}}),r.a.createElement(se.a,{name:"location",type:"text",label:"Location",rows:"3",placeholder:"Your location",className:e.textField,value:this.state.location,onChange:this.handleChange}))),r.a.createElement(W.a,null,r.a.createElement(R.a,{variant:"contained",onClick:this.handleClose,color:"primary"},"Cancel"),r.a.createElement(R.a,{variant:"contained",onClick:this.handleSubmit,color:"primary"},"Save"))))}}]),a}(n.Component),Pe=Object(p.b)((function(e){return{credentials:e.user.credentials}}),{editUserDetails:function(e){return function(t){t({type:"LOADING_USER"}),h.a.post("/user",e).then((function(){t(E())})).catch((function(e){return console.log(e)}))}}})(A()((function(e){return Object(v.a)(Object(v.a)({},e.spreadThis),{},{button:{float:"right"}})}))(De)),Ae=a(158),Re=a(267),Le=a(274),We=a(266),He=a(265),Fe=a(149),Be=a.n(Fe),Me=a(150),Ge=a.n(Me),Ye=a(151),ze=a.n(Ye),Ke=a(152),Ve=a.n(Ke),Xe=function(e){Object(w.a)(a,e);var t=Object(_.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this)).handleImageChange=function(e){e.preventDefault();var t=e.target.files[0],a=new FormData;a.append("file",t,t.name),n.props.uploadProfileImage(a)},n.handleEditImage=function(){document.getElementById("imageInput").click()},n.handleLogout=function(){n.props.logoutUser(),n.props.history.push("/page/login")},n}return Object(k.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.user,o=a.credentials,l=o.userHandle,s=o.createdAt,i=o.imageUrl,m=o.bio,u=o.website,p=o.location;return a.loading?r.a.createElement("p",null,"loading..."):r.a.createElement(Ae.a,{className:t.paper},r.a.createElement("div",{className:t.profile},r.a.createElement("div",{className:"profile-image"},r.a.createElement(He.a,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:r.a.createElement(F.a,{title:"Edit Profile Image"},r.a.createElement(We.a,{onClick:this.handleEditImage,color:"primary",size:"small"},r.a.createElement(Ue.a,null)))},r.a.createElement(Le.a,{src:i,className:"profile-image"}),r.a.createElement("input",{type:"file",id:"imageInput",hidden:!0,onChange:this.handleImageChange}))),r.a.createElement("hr",null),r.a.createElement("div",{className:"profile-details"},r.a.createElement(Re.a,{component:c.b,to:"user/".concat(l),color:"primary",variant:"h5"},"@",l),r.a.createElement("hr",null),m&&r.a.createElement(re.a,{variant:"body2"},m),r.a.createElement("hr",null),p&&r.a.createElement(n.Fragment,null,r.a.createElement(Be.a,{color:"primary"})," ",r.a.createElement("span",null,p),r.a.createElement("hr",null)),u&&r.a.createElement(n.Fragment,null,r.a.createElement(Ge.a,{color:"primary"}),r.a.createElement("a",{href:u,target:"_blank",rel:"noopener noreferrer"}," ",u),r.a.createElement("hr",null)),r.a.createElement(ze.a,{color:"primary"})," ",r.a.createElement("span",null,"Joined ",V()(s).format("MMM YYYY"))),r.a.createElement(F.a,{title:"LogOut",placement:"top"},r.a.createElement(B.a,{onClick:this.handleLogout},r.a.createElement(Ve.a,{color:"primary"}))),r.a.createElement(Pe,null)))}}]),a}(n.Component),Je={logoutUser:b,uploadProfileImage:function(e){return function(t){t({type:"LOADING_USER"}),h.a.post("/image",e).then((function(){t(E())})).catch((function(e){console.log(e)}))}}},$e=Object(p.b)((function(e){return{user:e.user}}),Je)(A()((function(e){return Object(v.a)({},e.spreadThis)}))(Xe)),qe=function(e){Object(w.a)(a,e);var t=Object(_.a)(a);function a(){return Object(x.a)(this,a),t.apply(this,arguments)}return Object(k.a)(a,[{key:"componentDidMount",value:function(){this.props.getPosts()}},{key:"render",value:function(){var e=this.props.data,t=e.posts,a=e.loading?r.a.createElement("p",null,"Loading..."):t.map((function(e){return r.a.createElement(we,{key:e._id,post:e})}));return r.a.createElement(D.a,{container:!0,spacing:2},r.a.createElement(D.a,{item:!0,sm:8,xs:12},a),r.a.createElement(D.a,{item:!0,sm:4,xs:12},r.a.createElement($e,{history:this.props.history})))}}]),a}(n.Component),Qe=Object(p.b)((function(e){return{data:e.data}}),{getPosts:function(){return function(e){e({type:"LOADING_DATA"}),h.a.get("/posts").then((function(t){e({type:"SET_POSTS",payload:t.data})})).catch((function(t){e({type:"SET_POSTS",payload:[]})}))}}})(qe),Ze=a(60),et=a.n(Ze),tt=function(e){Object(w.a)(a,e);var t=Object(_.a)(a);function a(){var e;return Object(x.a)(this,a),(e=t.call(this)).handleSubmit=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};e.props.loginUser(a,e.props.history)},e.handleChange=function(t){e.setState(Object(ce.a)({},t.target.name,t.target.value))},e.state={email:"",password:"",errors:{}},e}return Object(k.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.UI.loading,n=this.state.errors;return r.a.createElement(D.a,{container:!0,className:t.form},r.a.createElement(D.a,{item:!0,sm:!0}),r.a.createElement(D.a,{item:!0,sm:!0},r.a.createElement("img",{className:t.logo,src:et.a,alt:"WeConnect"}),r.a.createElement(re.a,{variant:"h2",className:t.pageTitle},"Login"),r.a.createElement("form",{noValidate:!0,onSubmit:this.handleSubmit},r.a.createElement(se.a,{id:"email",name:"email",type:"email",label:"Email",className:t.textField,onChange:this.handleChange,helperText:n.email,error:!!n.email,fullWidth:!0}),r.a.createElement("br",null),r.a.createElement(se.a,{id:"password",name:"password",type:"password",label:"Password",className:t.textField,onChange:this.handleChange,helperText:n.password,error:!!n.password,fullWidth:!0}),r.a.createElement("br",null),n.general&&r.a.createElement(re.a,{variant:"body2",className:t.customError},n.general),r.a.createElement(R.a,{type:"submit",variant:"contained",color:"primary",disabled:a,className:t.button,onClick:this.handleSubmit},"LOGIN",a&&r.a.createElement(Ee.a,{className:t.progress})),r.a.createElement("br",null),r.a.createElement("small",null,"Don't have an Account? Sign Up ",r.a.createElement(c.b,{to:"/page/signup"},"Here")))),r.a.createElement(D.a,{item:!0,sm:!0}))}}]),a}(n.Component),at={loginUser:function(e,t){return function(a){a({type:"LOADING_UI"}),h.a.post("/signIn",e).then((function(e){f(e.data.token),a(E()),a({type:"CLEAR_ERRORS"}),t.push("/")})).catch((function(e){a({type:"SET_ERRORS",payload:e.response.data})}))}}},nt=Object(p.b)((function(e){return{user:e.user,UI:e.UI}}),at)(A()((function(e){return Object(v.a)({},e.spreadThis)}))(tt)),rt=function(e){Object(w.a)(a,e);var t=Object(_.a)(a);function a(){var e;return Object(x.a)(this,a),(e=t.call(this)).handleSubmit=function(t){t.preventDefault();var a={email:e.state.email,firstName:e.state.firstName,lastName:e.state.lastName,password:e.state.password,confirmPassword:e.state.confirmPassword,userHandle:e.state.userHandle};e.props.signupUser(a,e.props.history)},e.handleChange=function(t){e.setState(Object(ce.a)({},t.target.name,t.target.value))},e.state={email:"",firstName:"",lastName:"",userHandle:"",password:"",confirmPassword:"",errors:{}},e}return Object(k.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.UI.loading,n=this.state.errors;return r.a.createElement(D.a,{container:!0,className:t.form},r.a.createElement(D.a,{item:!0,sm:!0}),r.a.createElement(D.a,{item:!0,sm:!0},r.a.createElement("img",{className:t.logo,src:et.a,alt:"WeConnect"}),r.a.createElement(re.a,{variant:"h2",className:t.pageTitle}," ","Signup"," "),r.a.createElement("form",{noValidate:!0,onSubmit:this.handleSubmit},r.a.createElement(se.a,{id:"email",name:"email",type:"email",label:"Email",className:t.textField,onChange:this.handleChange,helperText:n.email,error:!!n.email,fullWidth:!0}),r.a.createElement("br",null),r.a.createElement(se.a,{id:"firstName",name:"firstName",type:"text",label:"First Name",className:t.firstNameField,onChange:this.handleChange,helperText:n.firstName,error:!!n.firstName}),r.a.createElement(se.a,{id:"lastName",name:"lastName",type:"text",label:"Last Name",className:t.lastNameField,onChange:this.handleChange,helperText:n.lastName,error:!!n.lastName}),r.a.createElement("br",null),r.a.createElement(se.a,{id:"userHandle",name:"userHandle",type:"text",label:"Handle",className:t.textField,onChange:this.handleChange,helperText:n.userHandle,error:!!n.userHandle,fullWidth:!0}),r.a.createElement("br",null),r.a.createElement(se.a,{id:"password",name:"password",type:"password",label:"Password",className:t.textField,onChange:this.handleChange,helperText:n.password,error:!!n.password,fullWidth:!0}),r.a.createElement("br",null),r.a.createElement(se.a,{id:"confirmPassword",name:"confirmPassword",type:"text",label:"Confirm Password",className:t.textField,onChange:this.handleChange,helperText:n.confirmPassword,error:!!n.confirmPassword,fullWidth:!0}),r.a.createElement("br",null),n.general&&r.a.createElement(re.a,{variant:"body2",className:t.customError},n.general),r.a.createElement(R.a,{type:"submit",variant:"contained",color:"primary",disabled:a,className:t.button},"SIGNUP",a&&r.a.createElement(Ee.a,{className:t.progress})),r.a.createElement("br",null),r.a.createElement("small",null,"Already have an Account? Login ",r.a.createElement(c.b,{to:"/page/login"},"Here")))),r.a.createElement(D.a,{item:!0,sm:!0}))}}]),a}(n.Component),ot=Object(p.b)((function(e){return{user:e.user,UI:e.UI}}),{signupUser:function(e,t){return function(a){a({type:"LOADING_UI"}),h.a.post("/signUp",e).then((function(e){f(e.data.token),a(E()),a({type:"CLEAR_ERRORS"}),t.push("/page/")})).catch((function(e){a({type:"SET_ERRORS",payload:e.response.data})}))}}})(A()((function(e){return Object(v.a)({},e.spreadThis)}))(rt)),lt=a(268),ct=a(269),st=a(275),it=a(160),mt=a(153),ut=a.n(mt),pt=function(e){Object(w.a)(a,e);var t=Object(_.a)(a);function a(){var e;Object(x.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={open:!1,body:"",errors:{}},e.handleOpen=function(){e.setState({open:!0})},e.handleClose=function(){e.props.clearErrors(),e.setState({open:!1,errors:{}})},e.handleChange=function(t){e.setState(Object(ce.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.addPost({body:e.state.body})},e}return Object(k.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors}),e.UI.errors||e.UI.loading||this.setState({body:"",open:!1,errors:{}})}},{key:"render",value:function(){var e=this.state.errors,t=this.props,a=t.classes,o=t.UI.loading;return r.a.createElement(n.Fragment,null,r.a.createElement(F.a,{title:"Create New Post",placement:"top"},r.a.createElement(B.a,{onClick:this.handleOpen},r.a.createElement(ut.a,null))),r.a.createElement(L.a,{open:this.state.open,onClose:this.handleClose,fullWidth:!0,maxWidth:"sm"},r.a.createElement(F.a,{title:"Close",onClick:this.handleClose,className:a.closeButton},r.a.createElement(fe.a,null)),r.a.createElement(H.a,null," Add a new Post"),r.a.createElement(he.a,null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(se.a,{name:"body",type:"text",label:"POST!",multiline:!0,fullWidth:!0,rows:"3",placeholder:"Enter a text",error:!!e.body,helperText:e.body,className:a.textField,onChange:this.handleChange}),r.a.createElement(R.a,{type:"submit",variant:"contained",color:"primary",className:a.submitButton,disabled:o},"Submit",o&&r.a.createElement(Ee.a,{size:30,className:a.progressSpinner}))))))}}]),a}(n.Component),dt=Object(p.b)((function(e){return{UI:e.UI}}),{addPost:function(e){return function(t){t({type:"LOADING_UI"}),console.log("before axios...."+e.body),h.a.post("/post",e).then((function(e){console.log("axios then"),t({type:"ADD_POST",payload:e.data}),t(U())})).catch((function(e){return t({type:"SET_ERRORS",payload:e.response.data})}))}},clearErrors:U})(A()((function(e){return Object(v.a)(Object(v.a)({},e.spreadThis),{},{submitButton:{position:"relative",left:"84%"},progressSpinner:{position:"absolute"},closeButton:{position:"absolute",left:"93%",top:"10%"}})}))(pt)),ht=a(154),Et=a.n(ht),bt=a(155),ft=a.n(bt),gt=(Object(it.a)((function(e){return{nav:{color:e.palette.primary.main}}})),function(){}),yt=Object(p.b)((function(e){return{authenticated:e.user.authenticated}}))((function(e){var t=e.authenticated;return r.a.createElement("div",null,r.a.createElement(lt.a,null,r.a.createElement(ct.a,{className:"nav-container"},r.a.createElement(D.a,{container:!0,spacing:2},r.a.createElement(D.a,{xs:1,sm:1,item:!0},r.a.createElement(c.b,{to:"/"},r.a.createElement(Le.a,{variant:"rounded",src:et.a,alt:"WeConnect"}))),r.a.createElement(D.a,{xs:4,sm:10,item:!0,alignContent:"center",justify:"center"},t?r.a.createElement(st.a,{display:"flex",justifyContent:"center"},r.a.createElement(dt,null),r.a.createElement(c.b,{to:"/"},r.a.createElement(F.a,{title:"Home",placement:"top"},r.a.createElement(B.a,null,r.a.createElement(Et.a,null)))),r.a.createElement(F.a,{title:"Notifications",placement:"top"},r.a.createElement(B.a,{onClick:gt},r.a.createElement(ft.a,null)))):null),r.a.createElement(D.a,{item:!0,xs:1,sm:1})))))})),Ot=a(156),vt=a.n(Ot),jt=a(157),St=a(5),Ct=function(e){var t=e.component,a=e.authenticated,n=Object(jt.a)(e,["component","authenticated"]);return r.a.createElement(s.b,Object.assign({},n,{render:function(e){return!0===a?r.a.createElement(s.a,{to:"/page/login"}):r.a.createElement(t,e)}}))};Ct.propsTypes={user:a.n(St).a.object};Object(p.b)((function(e){return{autheticated:e.user.authenticated}}))(Ct);var Nt=localStorage.IdToken;Nt&&(1e3*vt()(Nt).exp<Date.now()?(T.dispatch(b()),window.location.href="/login"):(T.dispatch({type:"SET_AUTHENTICATED"}),h.a.defaults.headers.common.Authorization=Nt,T.dispatch(E())));var It=function(){return r.a.createElement(i.a,{theme:u},r.a.createElement(p.a,{store:T},r.a.createElement("div",{className:"App"},r.a.createElement(c.a,{basename:"/page"},r.a.createElement(yt,null),r.a.createElement("div",{className:"container"},r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"".concat("","/"),component:Qe}),r.a.createElement(s.b,{exact:!0,path:"/login",component:nt}),r.a.createElement(s.b,{exact:!0,path:"/signup",component:ot})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(It,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},60:function(e,t,a){e.exports=a.p+"static/media/logo.ade85996.png"}},[[169,1,2]]]);
//# sourceMappingURL=main.86f31cf9.chunk.js.map